<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>å …ç‰¢ãªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ </title>
        <style>
            /* å›è»¢è¦ç´  */
            .scroll-rotate {
                width: 100px;
                height: 100px;
                background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
                border-radius: 50%;
                position: fixed;
                top: 20px;
                right: 20px;
                z-index: 1000;
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-weight: bold;
                transition: transform 0.1s ease-out;
            }

            /* ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
            .hero-section {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                text-align: center;
                position: relative;
            }

            .hero-image {
                width: 300px;
                height: 300px;
                background: rgba(255, 255, 255, 0.1);
                border-radius: 50%;
                margin: 0 auto 2rem;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 4rem;
                backdrop-filter: blur(10px);
                border: 2px solid rgba(255, 255, 255, 0.2);
                transition: transform 0.3s ease;
            }

            .hero-text {
                font-size: 3rem;
                margin-bottom: 1rem;
                transition: opacity 0.3s ease;
            }

            .hero-subtitle {
                font-size: 1.2rem;
                opacity: 0.9;
            }

            /* æ¨ªç§»å‹•ãƒ†ã‚­ã‚¹ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
            .sliding-text-section {
                background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
                color: white;
                overflow: hidden;
            }

            .sliding-text {
                font-size: 4rem;
                font-weight: bold;
                white-space: nowrap;
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
                transition: transform 0.1s ease-out;
            }

            /* æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
            .horizontal-scroll-wrapper {
                height: 500vh; /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«è·é›¢ã‚’ä½œã‚‹ */
                position: relative;
            }

            .horizontal-scroll-sticky {
                position: sticky;
                top: 0;
                height: 100vh;
                overflow: hidden;
                background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            }

            .horizontal-content {
                display: flex;
                height: 100vh;
                width: 500vw; /* 5ã¤ã®ãƒ‘ãƒãƒ«åˆ† */
                transition: transform 0.1s ease-out;
            }

            .horizontal-panel {
                width: 100vw;
                height: 100vh;
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-size: 3rem;
                text-align: center;
                position: relative;
            }

            .horizontal-panel:nth-child(1) {
                background: rgba(255, 107, 107, 0.3);
            }
            .horizontal-panel:nth-child(2) {
                background: rgba(78, 205, 196, 0.3);
            }
            .horizontal-panel:nth-child(3) {
                background: rgba(255, 159, 26, 0.3);
            }
            .horizontal-panel:nth-child(4) {
                background: rgba(162, 155, 254, 0.3);
            }
            .horizontal-panel:nth-child(5) {
                background: rgba(255, 118, 117, 0.3);
            }

            /* ãƒ‘ãƒ©ãƒ©ãƒƒã‚¯ã‚¹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
            .parallax-section {
                height: 120vh;
                position: relative;
                background: #000;
                overflow: hidden;
            }

            .parallax-bg {
                position: absolute;
                top: -20vh;
                left: 0;
                width: 100%;
                height: 140vh;
                background: linear-gradient(45deg, #1e3c72 0%, #2a5298 100%);
                transition: transform 0.1s ease-out;
            }

            .parallax-content {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                text-align: center;
                color: white;
                z-index: 2;
                opacity: 0;
                transition: opacity 0.8s ease;
            }

            .parallax-content.visible {
                opacity: 1;
            }

            .parallax-content h2 {
                font-size: 4rem;
                margin-bottom: 1rem;
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            }

            /* ã‚ºãƒ¼ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
            .zoom-wrapper {
                height: 300vh;
                position: relative;
            }

            .zoom-sticky {
                position: sticky;
                top: 0;
                height: 100vh;
                overflow: hidden;
                background: #000;
            }

            .zoom-image {
                width: 100%;
                height: 100vh;
                background: linear-gradient(45deg, #fa709a 0%, #fee140 100%);
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-size: 3rem;
                font-weight: bold;
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
                transition: transform 0.1s ease-out;
            }

            /* ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
            .fade-in-section {
                background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
                color: #333;
            }

            .fade-in-content {
                text-align: center;
                opacity: 0;
                transform: translateY(50px);
                transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            }

            .fade-in-content.visible {
                opacity: 1;
                transform: translateY(0);
            }

            .fade-in-content h2 {
                font-size: 3rem;
                margin-bottom: 2rem;
            }

            .fade-in-content p {
                font-size: 1.2rem;
                max-width: 600px;
                line-height: 1.8;
            }

            /* ãƒ‡ãƒãƒƒã‚°æƒ…å ± */
            .debug-info {
                position: fixed;
                bottom: 20px;
                left: 20px;
                background: rgba(0, 0, 0, 0.8);
                color: #00ff00;
                padding: 1rem;
                border-radius: 10px;
                font-family: monospace;
                font-size: 0.8rem;
                z-index: 1001;
                max-width: 300px;
            }

            .debug-info div {
                margin-bottom: 0.5rem;
            }

            /* ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ */
            .progress-bar {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 4px;
                background: rgba(0, 0, 0, 0.1);
                z-index: 1000;
            }

            .progress-fill {
                height: 100%;
                background: linear-gradient(90deg, #667eea, #764ba2, #f093fb, #4facfe);
                width: 0%;
                transition: width 0.3s ease;
            }

            /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
            @media (max-width: 768px) {
                .hero-text {
                    font-size: 2rem;
                }

                .sliding-text {
                    font-size: 2rem;
                }

                .horizontal-panel {
                    font-size: 2rem;
                }

                .parallax-content h2 {
                    font-size: 2.5rem;
                }

                .fade-in-content h2 {
                    font-size: 2rem;
                }
            }
        </style>
    </head>
    <body>
        <!-- ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ -->
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <!-- ã‚ºãƒ¼ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="zoom-wrapper" data-scroll-type="zoom" data-zoom-scale="2">
            <div class="zoom-sticky">
                <div class="zoom-image" data-scroll-element="zoom-image">ğŸ“¸ ã‚ºãƒ¼ãƒ åŠ¹æœ</div>
            </div>
        </div>

        <!-- ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="fade-in-section" data-scroll-type="fadein">
            <div class="fade-in-content" data-scroll-element="fade-content" data-trigger-point="0.8">
                <h2>ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³åŠ¹æœ</h2>
                <p>
                    è¦ç´ ãŒè¦–ç•Œã«å…¥ã‚‹ã¨ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå§‹ã¾ã‚Šã¾ã™ã€‚ã“ã®ã‚ˆã†ãªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«åŠ¹æœã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹ãŒå¤§å¹…ã«å‘ä¸Šã—ã€ã‚ˆã‚Šé­…åŠ›çš„ãªWebã‚µã‚¤ãƒˆã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
                </p>
            </div>
        </section>
        <!-- å›è»¢è¦ç´  -->
        <div class="scroll-rotate" data-scroll-type="rotate" data-rotate-speed="10">ğŸ¯</div>

        <!-- ãƒ‡ãƒãƒƒã‚°æƒ…å ± -->
        <div class="debug-info" id="debugInfo">
            <div>æ¤œå‡ºã•ã‚ŒãŸè¦ç´ æ•°: <span id="elementCount">0</span></div>
            <div>ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³: <span id="activeAnimations">0</span></div>
            <div>ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä½ç½®: <span id="scrollPosition">0</span>px</div>
            <div>FPS: <span id="fps">0</span></div>
        </div>

        <!-- ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="hero-section" data-scroll-type="hero">
            <div>
                <div class="hero-image" data-scroll-element="hero-image">ğŸš€</div>
                <h1 class="hero-text" data-scroll-element="hero-text">å …ç‰¢ãªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚·ã‚¹ãƒ†ãƒ </h1>
                <p class="hero-subtitle">HTMLè¦ç´ ã®é †åºã«ä¾å­˜ã—ãªã„æŸ”è»Ÿãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³</p>
            </div>
        </section>

        <!-- æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="horizontal-scroll-wrapper" data-scroll-type="horizontal" data-scroll-distance="400">
            <div class="horizontal-scroll-sticky">
                <div class="horizontal-content" data-scroll-element="horizontal-content">
                    <div class="horizontal-panel">
                        <div>
                            <h2>ãƒ‘ãƒãƒ« 1</h2>
                            <p>æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é–‹å§‹</p>
                        </div>
                    </div>
                    <div class="horizontal-panel">
                        <div>
                            <h2>ãƒ‘ãƒãƒ« 2</h2>
                            <p>ã‚¹ãƒ ãƒ¼ã‚ºãªç§»å‹•</p>
                        </div>
                    </div>
                    <div class="horizontal-panel">
                        <div>
                            <h2>ãƒ‘ãƒãƒ« 3</h2>
                            <p>ç¶™ç¶šçš„ãªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«</p>
                        </div>
                    </div>
                    <div class="horizontal-panel">
                        <div>
                            <h2>ãƒ‘ãƒãƒ« 4</h2>
                            <p>ã‚‚ã†ã™ãçµ‚äº†</p>
                        </div>
                    </div>
                    <div class="horizontal-panel">
                        <div>
                            <h2>ãƒ‘ãƒãƒ« 5</h2>
                            <p>æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å®Œäº†</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- æ¨ªç§»å‹•ãƒ†ã‚­ã‚¹ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="sliding-text-section" data-scroll-type="sliding">
            <div class="sliding-text" data-scroll-element="sliding-text" data-slide-range="50">
                â† ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§æ¨ªç§»å‹•ã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆ â†’
            </div>
        </section>
        <!-- ãƒ‘ãƒ©ãƒ©ãƒƒã‚¯ã‚¹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="parallax-section" data-scroll-type="parallax">
            <div class="parallax-bg" data-scroll-element="parallax-bg" data-parallax-speed="100"></div>
            <div class="parallax-content" data-scroll-element="parallax-content">
                <h2>ãƒ‘ãƒ©ãƒ©ãƒƒã‚¯ã‚¹åŠ¹æœ</h2>
                <p>èƒŒæ™¯ãŒç•°ãªã‚‹é€Ÿåº¦ã§ç§»å‹•ã—ã¾ã™</p>
            </div>
        </section>

        <script>
            class RobustScrollAnimationSystem {
                constructor() {
                    this.animationElements = new Map();
                    this.ticking = false;
                    this.lastTime = 0;
                    this.frameCount = 0;
                    this.fps = 0;

                    this.init();
                }

                init() {
                    this.detectElements();
                    this.setupScrollListener();
                    this.startFPSCounter();
                    this.updateScrollEffects(); // åˆå›å®Ÿè¡Œ

                    console.log('ğŸ‰ å …ç‰¢ãªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ ãŒåˆæœŸåŒ–ã•ã‚Œã¾ã—ãŸ');
                    console.log(`æ¤œå‡ºã•ã‚ŒãŸè¦ç´ æ•°: ${this.animationElements.size}`);
                }

                // dataå±æ€§ã‚’ä½¿ç”¨ã—ã¦è¦ç´ ã‚’è‡ªå‹•æ¤œå‡º
                detectElements() {
                    this.animationElements.clear();

                    // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¿ã‚¤ãƒ—ã‚’æŒã¤å…¨ã¦ã®è¦ç´ ã‚’æ¤œå‡º
                    const scrollElements = document.querySelectorAll('[data-scroll-type]');

                    scrollElements.forEach((element) => {
                        const scrollType = element.dataset.scrollType;
                        const elementId = this.generateElementId(element);

                        const config = {
                            element: element,
                            type: scrollType,
                            ...this.getElementConfig(element),
                        };

                        this.animationElements.set(elementId, config);
                    });

                    this.updateDebugInfo();
                }

                // è¦ç´ ã®ä¸€æ„IDã‚’ç”Ÿæˆ
                generateElementId(element) {
                    return (
                        element.id ||
                        element.className.split(' ').join('-') + '-' + Math.random().toString(36).substr(2, 9)
                    );
                }

                // è¦ç´ ã®è¨­å®šã‚’å–å¾—
                getElementConfig(element) {
                    const config = {};

                    // dataå±æ€§ã‹ã‚‰è¨­å®šã‚’å–å¾—
                    Object.keys(element.dataset).forEach((key) => {
                        if (key !== 'scrollType') {
                            config[key] = element.dataset[key];
                        }
                    });

                    // å­è¦ç´ ã‚‚æ¤œç´¢
                    const childElements = element.querySelectorAll('[data-scroll-element]');
                    config.childElements = Array.from(childElements).map((child) => ({
                        element: child,
                        name: child.dataset.scrollElement,
                        ...child.dataset,
                    }));

                    return config;
                }

                // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒªã‚¹ãƒŠãƒ¼ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
                setupScrollListener() {
                    window.addEventListener('scroll', () => this.requestTick(), { passive: true });
                    window.addEventListener('resize', () => this.detectElements());
                }

                requestTick() {
                    if (!this.ticking) {
                        requestAnimationFrame(() => this.updateScrollEffects());
                        this.ticking = true;
                    }
                }

                // ãƒ¡ã‚¤ãƒ³ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«åŠ¹æœæ›´æ–°é–¢æ•°
                updateScrollEffects() {
                    const scrollTop = window.pageYOffset;
                    const windowHeight = window.innerHeight;
                    let activeAnimations = 0;

                    this.animationElements.forEach((config, id) => {
                        const { element, type } = config;

                        // è¦ç´ ãŒå­˜åœ¨ã™ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
                        if (!document.contains(element)) {
                            this.animationElements.delete(id);
                            return;
                        }

                        const rect = element.getBoundingClientRect();
                        const isVisible = rect.bottom > 0 && rect.top < windowHeight;

                        if (isVisible || type === 'rotate') {
                            activeAnimations++;
                            this.applyAnimation(config, scrollTop, windowHeight, rect);
                        }
                    });

                    this.updateProgress(scrollTop);
                    this.updateDebugInfo(activeAnimations);
                    this.ticking = false;
                }

                // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ—åˆ¥ã®å‡¦ç†
                applyAnimation(config, scrollTop, windowHeight, rect) {
                    const { element, type, childElements = [] } = config;

                    switch (type) {
                        case 'rotate':
                            this.applyRotateAnimation(element, config, scrollTop);
                            break;

                        case 'hero':
                            this.applyHeroAnimation(childElements, rect, windowHeight);
                            break;

                        case 'sliding':
                            this.applySlidingAnimation(childElements, config, rect, windowHeight);
                            break;

                        case 'horizontal':
                            this.applyHorizontalAnimation(childElements, config, rect, windowHeight);
                            break;

                        case 'parallax':
                            this.applyParallaxAnimation(childElements, rect, windowHeight);
                            break;

                        case 'zoom':
                            this.applyZoomAnimation(childElements, config, rect, windowHeight);
                            break;

                        case 'fadein':
                            this.applyFadeInAnimation(childElements, config, rect, windowHeight);
                            break;
                    }
                }

                // å›è»¢ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
                applyRotateAnimation(element, config, scrollTop) {
                    const speed = parseFloat(config.rotateSpeed) || 10;
                    const rotation = (scrollTop / speed) % 360;
                    element.style.transform = `rotate(${rotation}deg)`;
                }

                // ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
                applyHeroAnimation(childElements, rect, windowHeight) {
                    if (rect.bottom > 0 && rect.top < windowHeight) {
                        const progress = Math.abs(rect.top) / windowHeight;

                        childElements.forEach((child) => {
                            if (child.name === 'hero-image') {
                                const scale = 1 + progress * 2;
                                child.element.style.transform = `scale(${scale})`;
                            } else if (child.name === 'hero-text') {
                                child.element.style.opacity = Math.max(0, 1 - progress * 2);
                            }
                        });
                    }
                }

                // æ¨ªç§»å‹•ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
                applySlidingAnimation(childElements, config, rect, windowHeight) {
                    if (rect.bottom > 0 && rect.top < windowHeight) {
                        const progress = -rect.top / windowHeight;
                        const slideRange = parseFloat(config.slideRange) || 50;
                        const translateX = progress * slideRange - slideRange / 2;

                        childElements.forEach((child) => {
                            if (child.name === 'sliding-text') {
                                child.element.style.transform = `translateX(${translateX}vw)`;
                            }
                        });
                    }
                }

                // æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
                applyHorizontalAnimation(childElements, config, rect, windowHeight) {
                    const wrapperHeight = config.element.offsetHeight;

                    if (rect.bottom > 0 && rect.top < windowHeight) {
                        const progress = Math.min(1, Math.max(0, -rect.top / (wrapperHeight - windowHeight)));
                        const scrollDistance = parseFloat(config.scrollDistance) || 400;
                        const translateX = -progress * scrollDistance;

                        childElements.forEach((child) => {
                            if (child.name === 'horizontal-content') {
                                child.element.style.transform = `translateX(${translateX}vw)`;
                            }
                        });
                    }
                }

                // ãƒ‘ãƒ©ãƒ©ãƒƒã‚¯ã‚¹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
                applyParallaxAnimation(childElements, rect, windowHeight) {
                    if (rect.bottom > 0 && rect.top < windowHeight) {
                        const progress = -rect.top / windowHeight;

                        childElements.forEach((child) => {
                            if (child.name === 'parallax-bg') {
                                const speed = parseFloat(child.parallaxSpeed) || 100;
                                child.element.style.transform = `translateY(${progress * speed}px)`;
                            } else if (child.name === 'parallax-content') {
                                if (rect.top < windowHeight * 0.5) {
                                    child.element.classList.add('visible');
                                }
                            }
                        });
                    }
                }

                // ã‚ºãƒ¼ãƒ ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
                applyZoomAnimation(childElements, config, rect, windowHeight) {
                    const wrapperHeight = config.element.offsetHeight;

                    if (rect.bottom > 0 && rect.top < windowHeight) {
                        const progress = Math.min(1, Math.max(0, -rect.top / (wrapperHeight - windowHeight)));
                        const zoomScale = parseFloat(config.zoomScale) || 2;
                        const scale = 1 + progress * zoomScale;

                        childElements.forEach((child) => {
                            if (child.name === 'zoom-image') {
                                child.element.style.transform = `scale(${scale})`;
                            }
                        });
                    }
                }

                // ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
                applyFadeInAnimation(childElements, config, rect, windowHeight) {
                    const triggerPoint = parseFloat(config.triggerPoint) || 0.8;

                    if (rect.top < windowHeight * triggerPoint) {
                        childElements.forEach((child) => {
                            if (child.name === 'fade-content') {
                                child.element.classList.add('visible');
                            }
                        });
                    }
                }

                // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼æ›´æ–°
                updateProgress(scrollTop) {
                    const docHeight = document.documentElement.scrollHeight - window.innerHeight;
                    const scrollPercent = (scrollTop / docHeight) * 100;
                    const progressFill = document.getElementById('progressFill');
                    if (progressFill) {
                        progressFill.style.width = `${Math.min(scrollPercent, 100)}%`;
                    }
                }

                // ãƒ‡ãƒãƒƒã‚°æƒ…å ±æ›´æ–°
                updateDebugInfo(activeAnimations = 0) {
                    const elementCount = document.getElementById('elementCount');
                    const activeAnimationsEl = document.getElementById('activeAnimations');
                    const scrollPosition = document.getElementById('scrollPosition');
                    const fpsEl = document.getElementById('fps');

                    if (elementCount) elementCount.textContent = this.animationElements.size;
                    if (activeAnimationsEl) activeAnimationsEl.textContent = activeAnimations;
                    if (scrollPosition) scrollPosition.textContent = Math.round(window.pageYOffset);
                    if (fpsEl) fpsEl.textContent = this.fps;
                }

                // FPSã‚«ã‚¦ãƒ³ã‚¿ãƒ¼
                startFPSCounter() {
                    setInterval(() => {
                        this.fps = this.frameCount;
                        this.frameCount = 0;
                    }, 1000);

                    const countFrame = () => {
                        this.frameCount++;
                        requestAnimationFrame(countFrame);
                    };
                    countFrame();
                }

                // å‹•çš„è¦ç´ ã®å†æ¤œå‡º
                refresh() {
                    this.detectElements();
                    console.log('ğŸ”„ è¦ç´ ã‚’å†æ¤œå‡ºã—ã¾ã—ãŸ');
                }

                // ç‰¹å®šã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç„¡åŠ¹åŒ–/æœ‰åŠ¹åŒ–
                toggleAnimation(elementId, enabled = true) {
                    const config = this.animationElements.get(elementId);
                    if (config) {
                        config.enabled = enabled;
                    }
                }

                // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æƒ…å ±å–å¾—
                getPerformanceInfo() {
                    return {
                        elementsCount: this.animationElements.size,
                        fps: this.fps,
                        memoryUsage: performance.memory
                            ? {
                                  used: Math.round(performance.memory.usedJSHeapSize / 1024 / 1024) + 'MB',
                                  total: Math.round(performance.memory.totalJSHeapSize / 1024 / 1024) + 'MB',
                              }
                            : 'N/A',
                    };
                }
            }

            // ã‚·ã‚¹ãƒ†ãƒ ã‚’åˆæœŸåŒ–
            const scrollSystem = new RobustScrollAnimationSystem();

            // ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«å…¬é–‹ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
            window.scrollSystem = scrollSystem;

            // å‹•çš„è¦ç´ è¿½åŠ ã®ãƒ‡ãƒ¢
            // setTimeout(() => {
            //     console.log('ğŸ’¡ 5ç§’å¾Œã«æ–°ã—ã„è¦ç´ ã‚’å‹•çš„è¿½åŠ ');

            //     const newSection = document.createElement('section');
            //     newSection.style.cssText = `
            //     min-height: 100vh;
            //     background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            //     display: flex;
            //     align-items: center;
            //     justify-content: center;
            //     color: white;
            //     text-align: center;
            //     font-size: 2rem;
            // `;
            //     newSection.dataset.scrollType = 'fadein';
            //     newSection.innerHTML = `
            //     <div data-scroll-element="fade-content" data-trigger-point="0.7">
            //         <h2>ğŸ†• å‹•çš„ã«è¿½åŠ ã•ã‚ŒãŸã‚»ã‚¯ã‚·ãƒ§ãƒ³</h2>
            //         <p>ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯5ç§’å¾Œã«å‹•çš„ã«è¿½åŠ ã•ã‚Œã¾ã—ãŸï¼</p>
            //     </div>
            // `;

            //     document.body.appendChild(newSection);
            //     scrollSystem.refresh();
            // }, 5000);

            // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ
            // document.addEventListener('keydown', (e) => {
            //     switch (e.key.toLowerCase()) {
            //         case 'r':
            //             e.preventDefault();
            //             scrollSystem.refresh();
            //             console.log('ğŸ”„ æ‰‹å‹•æ›´æ–°å®Ÿè¡Œ');
            //             break;
            //         case 'p':
            //             e.preventDefault();
            //             console.log('ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æƒ…å ±:', scrollSystem.getPerformanceInfo());
            //             break;
            //     }
            // });

            // console.log('ğŸ® ä½¿ç”¨å¯èƒ½ãªã‚³ãƒãƒ³ãƒ‰:');
            // console.log('- Rã‚­ãƒ¼: è¦ç´ ã‚’æ‰‹å‹•æ›´æ–°');
            // console.log('- Pã‚­ãƒ¼: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æƒ…å ±è¡¨ç¤º');
            // console.log('- scrollSystem.refresh(): è¦ç´ å†æ¤œå‡º');
            // console.log('- scrollSystem.getPerformanceInfo(): ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æƒ…å ±');
        </script>
    </body>
</html>
